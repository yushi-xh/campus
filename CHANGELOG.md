# 更新日志

本文档记录了校园网自动登录工具的所有重要更改。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
版本号遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

## [2.7] - 2025-11-20

### 新增
- 网络探测容错机制：连续失败 3 次才判定为断网
- 新增网络状态恢复日志提示
- 改进版网络探测算法文档

### 优化
- ⚡ 网络探测精度优化：消除"假断网"误判
- 替换不稳定的 www.gstatic.com 探测地址
- 新增 connectivitycheck.gstatic.com 和 google.cn 作为探测节点
- 超时时间从 5 秒延长至 10 秒，适应弱网环境
- GUI版本检测间隔从 5 秒调整为 30 秒，降低资源消耗
- 优化探测日志，显示每次探测耗时和状态

### 修复
- 修复因探测超时导致的误重登录问题
- 修复单次网络波动触发不必要登录的问题
- 提升弱网环境下的稳定性

### 文档
- 更新 README.md 到 v2.7
- 添加网络探测改进方案说明
- 更新 CLAUDE.md 开发文档

## [2.6] - 2025-11-07

### 新增
- 智能注册表清理功能：程序退出时自动检测并清理启动项
- 双重保障机制：保存配置时清理 + 退出程序时清理
- 完善的使用文档和FAQ

### 优化
- ⚡ 网络检测间隔从 30 秒优化为 5 秒（性能提升 6 倍）
- 断网后能在 5 秒内快速重连
- 改进用户体验，减少等待时间

### 修复
- 修复取消开机自启但未保存时注册表未清理的问题
- 确保注册表状态与用户配置保持一致

### 文档
- 更新 README.md 到 v2.6
- 添加详细的使用说明和常见问题解答
- 创建 CONTRIBUTING.md 贡献指南
- 创建 CHANGELOG.md 更新日志
- 添加 LICENSE 文件

### 安全
- 删除配置文件中的敏感信息
- 创建 login_config.json.example 示例文件
- 更新 .gitignore 防止敏感信息泄露

## [2.5] - 2025-11-06

### 新增
- 开机启动时自动隐藏到系统托盘
- 添加 `--startup` 命令行参数支持静默启动
- 真正的后台运行体验

### 优化
- 开机启动不再弹出主窗口
- 用户可以从托盘随时打开主窗口
- 提升开机体验

## [2.4] - 2025-11-06

### 修复
- 修复按钮文字偏移问题
- 使用多层尺寸获取和 anchor='center' 确保文字居中
- 改进按钮渲染逻辑

### 优化
- 提升界面美观度
- 改善视觉体验

## [2.3] - 2025-11-06

### 新增
- Windows 开机自启功能
- 通过注册表实现自动启动
- 启动后自动开始网络监控

### 优化
- 勾选"开机自启"后自动添加到系统启动项
- 取消勾选后自动移除启动项

## [2.2] - 2025-11-06

### 修复
- 修复打包后配置文件路径错误
- 使用 `sys.executable` 替代 `__file__` 获取程序路径
- 确保配置文件保存在 exe 同目录

### 优化
- 改进路径处理逻辑
- 支持打包后正确读取和保存配置

## [2.1] - 2025-11-06

### 修复
- 修复 PyInstaller 打包时的 pkg_resources 错误
- 在 hiddenimports 中添加 pkg_resources 相关模块

### 优化
- 改进打包配置
- 确保所有依赖正确打包

## [2.0] - 2025-11-06

### 新增
- 首个打包版本发布
- 单文件 exe，约 22 MB
- 完整的 GUI 界面
- 系统托盘支持
- 深色/浅色主题切换

### 优化
- 使用 PyInstaller 优化打包
- 启用 UPX 压缩
- 减小文件体积

## [1.0] - 2025-11-06

### 新增
- 初始版本发布
- 命令行版本实现
- GUI 图形界面
- 自动探测校园网认证入口
- 支持多种密码加密方式
- 网络监控模式
- 配置持久化
- 账号密码保存
- 自动重连功能
- 详细日志输出

### 功能特性
- 🚀 快速登录
- 🔍 智能探测
- 🔄 自动重连
- 📊 实时监控
- 💾 配置保存
- 🎨 美观界面
- 📝 详细日志

---

## 版本说明

### 版本号格式
版本号格式为 `主版本号.次版本号.修订号`，例如 `2.6.0`

- **主版本号**：重大功能变更或不兼容的 API 修改
- **次版本号**：向下兼容的功能性新增
- **修订号**：向下兼容的问题修正

### 更新类型

- **新增 (Added)**: 新功能
- **优化 (Changed)**: 对现有功能的更改
- **弃用 (Deprecated)**: 即将移除的功能
- **移除 (Removed)**: 已移除的功能
- **修复 (Fixed)**: Bug 修复
- **安全 (Security)**: 安全性改进

### 获取更新

- 访问 [Releases](https://github.com/yourusername/campus-auto-login/releases) 页面下载最新版本
- 查看每个版本的详细说明和下载链接

### 升级建议

**推荐版本**: v2.6（最新稳定版）

**升级步骤**:
1. 下载最新版本
2. 如使用旧版本的开机自启，先取消旧版本的开机自启
3. 删除旧版本文件
4. 运行新版本并重新配置开机自启

**注意事项**:
- 配置文件 `login_config.json` 可以继续使用
- 建议先备份配置文件
- exe 移动位置后需要重新设置开机自启

---

**最后更新**: 2025-11-07
**作者**: yushi-xh
